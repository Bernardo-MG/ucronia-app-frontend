<!-- Controls -->
<div uiJustifyCenter class="pb-2">
  <!-- To previous year button -->
  @if (canGoPrevious) {
    <button id="previousYearButton" type="button" class="btn btn-link" (click)="onGoPrevious()"
      [disabled]="!canGoPrevious" [attr.aria-disabled]="!canGoPrevious" aria-label="Previous year">
      <icon-backward />
    </button>
  }
  <div class="w-25 px-3">
    <!-- Current year -->
    <p-select [(ngModel)]="year" [disabled]="waiting()" [options]="years" (onChange)="onGoTo($event)" />
  </div>
  <!-- To next year button -->
  @if (canGoNext) {
    <button id="nextYearButton" type="button" class="btn btn-link" (click)="onGoNext()"
      [disabled]="!canGoNext" [attr.aria-disabled]="!canGoNext" aria-label="Next year">
      <icon-forward />
    </button>
  }
</div>
<!-- Table -->
<div class="table-responsive" *uiBlock="waiting()">
  <p-table [value]="feeCalendar()">
    <ng-template #header>
      <tr>
        <th>Socio</th>
        @for (monthName of monthNames; track monthName) {
          <th> {{monthName}}</th>
        }
      </tr>
    </ng-template>
    <ng-template #body let-memberFees>
      <tr [ngClass]="{ 'table-warning': !memberFees.member.active}">
        <td>
          {{memberFees.member.name.fullName}}
        </td>
        <!-- Month fees -->
        @for (monthNumber of monthNumbers; track monthNumber) {
          <td>
            @if (hasMonth(memberFees.months, monthNumber)) {
              @if(isPaid(memberFees.months, monthNumber)) {
                <p-button icon="pi pi-check text-success" routerLink="{{getMonth(memberFees.months, monthNumber)}}/{{memberFees.member.number}}" rounded text />
              } @else {
                <p-button icon="pi pi-times text-danger" routerLink="{{getMonth(memberFees.months, monthNumber)}}/{{memberFees.member.number}}" rounded text />
              }
            }
          </td>
        }
      </tr>
    </ng-template>
  </p-table>
</div>