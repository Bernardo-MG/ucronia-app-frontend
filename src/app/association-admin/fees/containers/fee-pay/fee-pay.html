<div uiResponsiveShortColumns>
  <p-card>
    <p-stepper [value]="currentStep" [linear]="true">
      <p-step-item [value]="1">
        <p-step>Socio</p-step>
        <p-step-panel>
          <ng-template #content>
            <!-- Member selection -->
            <app-fee-pay-select-member [loading]="loading" [getMemberSelection]="onGetSelection.bind(this)"
              (selectMember)="onSelectMember($event)" />
          </ng-template>
        </p-step-panel>
      </p-step-item>
      <p-step-item [value]="2">
        <p-step>Fecha</p-step>
        <p-step-panel>
          <ng-template #content>
            <p-button label="Back" icon="pi pi-arrow-left" iconPos="right" (onClick)="onReturnToMembers()" />
            <!-- Date selection -->
            <div class="row">
              <div class="col-md-2">
                <p-toggleswitch [(ngModel)]="pay" [disabled]="saving" [attr.aria-disabled]="saving" />
              </div>
              <div class="col-md-10">
                Pagada
              </div>
            </div>
            <!-- Form -->
            @switch (pay) {
              @case (true) {
                <!-- Pay form -->
                <assoc-fee-pay-form [waiting]="saving" [failures]="failures" [readonly]="!createPermission"
                  [member]="member" (save)="onSave($event)" />
              }
              @case (false) {
                <!-- Create unpaid form -->
                <assoc-fee-creation-form [waiting]="saving" [failures]="failures" [readonly]="!createPermission"
                  [member]="member" (save)="onCreateUnpaid($event)" />
              }
            }
          </ng-template>
        </p-step-panel>
      </p-step-item>
    </p-stepper>
  </p-card>
</div>