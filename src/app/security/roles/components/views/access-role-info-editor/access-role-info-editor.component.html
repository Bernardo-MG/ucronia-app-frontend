<layout-article title="Editar rol">
  <div appResponsiveShortColumns>
    <!-- Role -->
    <div class="mb-1">
      <div class="card">
        <div class="card-body">
          <div *ngIf="showMenu">
            <form-control-buttons [editable]="editable" [deletable]="deletable" (startEditing)="onStartEditing()"
              (delete)="onDelete()"></form-control-buttons>
          </div>
          <access-role-info id="info" [data]="data"></access-role-info>
        </div>
      </div>
    </div>
    <article class="p-4">
      <header>
        <h2 class="border-bottom">Permisos</h2>
      </header>
      <!-- Permissions -->
      <div class="mb-3">
        <div class="card">
          <div class="card-body">
            <!-- Permissions list -->
            <access-role-permissions [permissions]="data.permissions" [deletable]="deleteEnabled"
              (remove)="onRemovePermission($event)"></access-role-permissions>
            <div class="d-grid">
              <!-- Add button -->
              <button type="button" class="btn btn-primary" aria-label="Pick permission" data-bs-toggle="modal"
                data-bs-target="#pickPermissionModal">
                <icon-add></icon-add>
              </button>
            </div>
          </div>
        </div>
      </div>
    </article>
  </div>
</layout-article>

<!-- Modal for picking permissions -->
<layout-modal name="pickPermissionModal" title="Elige un permiso" acceptText="">
  <access-role-add-permission [permissions]="permissions" (goTo)="onLoadPermissions($event)"
    (changeDirection)="onChangePermissionsDirection($event)"
    (addPermission)="onAddPermission($event)"></access-role-add-permission>
</layout-modal>