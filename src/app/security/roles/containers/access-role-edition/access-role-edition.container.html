<div uiResponsiveShortColumns>
  <p-card>
    <!-- Name -->
    <div class="row">
      <div class="col-sm-3 text-primary">Nombre</div>
      <div class="col-sm-9">
        @if (waiting) {
          <p-skeleton class="mb-2" />
        } @else {
          {{data.name}}
        }
      </div>
    </div>
  </p-card>
  <p-card>
    <!-- Permissions -->
    <p-table lazy="true" dataKey="name" [loading]="waiting" [value]="rolePermissions.content" paginator="true" [rows]="rolePermissions.size"
      [totalRecords]="rolePermissions.totalElements" [first]="firstRolePermission" (onPage)="onPermissionsPageChange($event)" showCurrentPageReport="true"
      currentPageReportTemplate="Total: {totalRecords}">
      <ng-template #header>
        <tr>
          <th></th>
          <th>Recurso</th>
          <th>Acci√≥n</th>
        </tr>
      </ng-template>
      <ng-template #body let-permission>
        <tr>
          <td>
            <button [disabled]="!deletable" (click)="onRemovePermission(permission)" type="button"
              class="btn btn-link link-dark" role="button" aria-label="Back">
              <span class="pi pi-trash"></span>
            </button>
          </td>
          <td>{{permission.resource}}</td>
          <td>{{permission.action}}</td>
        </tr>
      </ng-template>
    </p-table>
    <ng-template #footer>
      <div class="d-grid">
        <!-- Add button -->
        <button type="button" class="btn btn-primary" aria-label="Pick permission" data-bs-toggle="modal"
          data-bs-target="#pickPermissionModal">
          <icon-add />
        </button>
      </div>
    </ng-template>
  </p-card>
</div>

<!-- Modal for picking permissions -->
<ui-modal name="pickPermissionModal" title="Elige un permiso" acceptText="">
  <access-role-add-permission [permissions]="permissions" (goTo)="onLoadPermissions($event)"
    (changeDirection)="onChangePermissionsDirection($event)" (addPermission)="onAddPermission($event)" />
</ui-modal>