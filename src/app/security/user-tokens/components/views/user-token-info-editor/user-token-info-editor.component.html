<layout-article title="Editar token de usuario">
  <div appResponsiveShortColumns>
    <!-- Role -->
    <div class="mb-1">
      <!-- Info -->
      <div class="card">
        <div class="card-body">
          <access-user-token-info id="info" [failures]="failures" [data]="data"></access-user-token-info>
        </div>
        <footer class="card-footer">
          <div class="row">
            <!-- Revoke button -->
            <div class="col-sm-2 d-grid gap-2">
              <layout-waiting-button [waiting]="waiting" [disabled]="!editEnabled" name="Revoke" data-bs-toggle="modal"
                [attr.data-bs-target]="editEnabled ? '#revokeModal' : ''">Revocado</layout-waiting-button>
            </div>
            <!-- Extend expiration button -->
            <div class="col-sm-2 d-grid gap-2">
              <layout-waiting-button [waiting]="waiting" [disabled]="!editEnabled" name="Extend expiration"
                data-bs-toggle="modal" [attr.data-bs-target]="editEnabled ? '#extendExpirationModal' : ''">Extender
                expiración</layout-waiting-button>
            </div>
          </div>
        </footer>
      </div>
    </div>
  </div>
</layout-article>

<!-- Modal for extending expiration -->
<layout-modal name="extendExpirationModal" title="Extender expiración" acceptText="Extender"
  (accept)="onExtendExpiration()">
  <p>Elige una nueva fecha</p>
  <form [formGroup]="extendExpirationForm" (ngSubmit)="onExtendExpiration()" class="needs-validation" novalidate>
    <input type="datetime-local" id="extendExpirationInput" class="form-control" formControlName="expirationDate">
  </form>
</layout-modal>

<!-- Modal confirmation for revoking -->
<layout-modal name="revokeModal" title="Revocar token" acceptText="Revocar" (accept)="onRevoke()">
  <p>¿Estás seguro de que quieres revocar el token?</p>
  <p class="text-warning"><small>Esta acción no se puede deshacer.</small></p>
</layout-modal>