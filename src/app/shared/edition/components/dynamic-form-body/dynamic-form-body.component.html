<form [formGroup]="form" (ngSubmit)="onSave()" class="needs-validation" novalidate>
  <!-- For each field definition -->
  <ng-template ngFor let-field [ngForOf]="fields">
    <div class="row mb-2">
      <!-- String input -->
      <ng-template [ngIf]="field.type === 'string'">
        <label for="{{field.property}}Input" id="{{field.property}}Label"
          class="col-sm-2 col-form-label">{{field.name}}</label>
        <div class="col-sm-10">
          <input type="text" id="{{field.property}}Input" formControlName="{{field.property}}"
            [readonly]="!editable || !field.editable" class="form-control"
            [ngClass]="{ 'is-invalid': isInvalid(field.property) }" attr.aria-describedby="{{field.property}}Label">
          <div class="invalid-feedback" *ngFor="let failure of getFailures(field.property)">
            <span *ngIf="failure.field === field.property">{{failure.message}}</span>
          </div>
        </div>
      </ng-template>
      <!-- Boolean input -->
      <ng-template [ngIf]="field.type === 'boolean'">
        <div class="col-sm-10 offset-sm-2">
          <div class="form-check">
            <input type="checkbox" id="{{field.property}}Input" formControlName="{{field.property}}"
              [readonly]="!editable || !field.editable" class="form-check-input"
              [ngClass]="{ 'is-invalid': isInvalid(field.property) }" attr.aria-describedby="{{field.property}}Label">
            <label for="{{field.property}}Input" id="{{field.property}}Label"
              class="col-sm-2 col-form-label">{{field.name}}</label>
            <div class="invalid-feedback" *ngFor="let failure of getFailures(field.property)">
              <span *ngIf="failure.field === field.property">{{failure.message}}</span>
            </div>
          </div>
        </div>
      </ng-template>
      <!-- Float input -->
      <ng-template [ngIf]="field.type === 'float'">
        <label for="{{field.property}}Input" id="{{field.property}}Label"
          class="col-sm-2 col-form-label">{{field.name}}</label>
        <div class="col-sm-10">
          <input type="number" step="any" id="{{field.property}}Input" formControlName="{{field.property}}"
            [readonly]="!editable || !field.editable" class="form-control"
            [ngClass]="{ 'is-invalid': isInvalid(field.property) }" attr.aria-describedby="{{field.property}}Label">
          <div class="invalid-feedback" *ngFor="let failure of getFailures(field.property)">
            <span *ngIf="failure.field === field.property">{{failure.message}}</span>
          </div>
        </div>
      </ng-template>
      <!-- Date input -->
      <ng-template [ngIf]="field.type === 'date'">
        <label for="{{field.property}}Input" id="{{field.property}}Label"
          class="col-sm-2 col-form-label">{{field.name}}</label>
        <div class="col-sm-10">
          <input type="date" id="{{field.property}}Input" attr.aria-describedby="{{field.property}}Label"
            formControlName="{{field.property}}" [readonly]="!editable || !field.editable" class="form-control"
            [ngClass]="{ 'is-invalid': isInvalid(field.property) }">
          <div class="invalid-feedback" *ngFor="let failure of getFailures(field.property)">
            <span *ngIf="failure.field === field.property">{{failure.message}}</span>
          </div>
        </div>
      </ng-template>
      <!-- Month input -->
      <ng-template [ngIf]="field.type === 'month'">
        <label for="{{field.property}}Input" id="{{field.property}}Label"
          class="col-sm-2 col-form-label">{{field.name}}</label>
        <div class="col-sm-10">
          <input type="month" id="{{field.property}}Input" attr.aria-describedby="{{field.property}}Label"
            formControlName="{{field.property}}" [readonly]="!editable || !field.editable" class="form-control"
            [ngClass]="{ 'is-invalid': isInvalid(field.property) }">
          <div class="invalid-feedback" *ngFor="let failure of getFailures(field.property)">
            <span *ngIf="failure.field === field.property">{{failure.message}}</span>
          </div>
        </div>
      </ng-template>
    </div>
  </ng-template>
</form>