<p-menu #editionMenu [model]="editionMenuItems" [popup]="true"></p-menu>
<p-table lazy="true" dataKey="number" [loading]="loading()" [value]="members()" paginator="true" [rows]="rows()"
  [totalRecords]="totalRecords()" [first]="first" showCurrentPageReport="true"
  currentPageReportTemplate="Total: {totalRecords}" (onSort)="changeDirection.emit($event)"
  (onPage)="changePage.emit($event.first)">

  <ng-template #header>
    <tr class="border-b bg-gray-100">
      <th pSortableColumn="fullName" class="py-3 px-4 text-left font-medium text-gray-700">
        Nombre
        <p-sortIcon field="fullName"></p-sortIcon>
      </th>
      <th class="w-50"></th>
    </tr>
  </ng-template>

  <ng-template #body let-member>
    <tr class="hover:bg-gray-50 transition-colors">
      <td class="py-2 px-4">
        {{ member.name.fullName }}
        <assoc-member-status-tag [member]="member" />
      </td>

      <td class="flex justify-end space-x-2 w-50 py-2 px-4">
        @if (readContact()) {
          <p-button icon="pi pi-eye" severity="secondary" aria-label="Ver" [disabled]="!readContact()"
            [attr.aria-disabled]="!readContact()" aria-label="Mostrar contacto" (click)="show.emit(member)" rounded text
            class="!p-2"></p-button>
        }

        @if (editable()) {
          <p-button icon="pi pi-pencil" severity="secondary" [disabled]="!editable()" aria-label="Editar"
            [attr.aria-disabled]="!editable()" (click)="openEditionMenu($event, member)" rounded text
            class="!p-2"></p-button>
        }

        @if (deletable()) {
          <p-button icon="pi pi-trash" severity="danger" [disabled]="!deletable()" aria-label="Borrar"
            [attr.aria-disabled]="!deletable()" (click)="onDelete($event, member.number)" rounded text
            class="!p-2"></p-button>
        }
      </td>
    </tr>
  </ng-template>

</p-table>