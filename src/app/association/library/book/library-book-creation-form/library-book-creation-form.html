<div class="mb-4">
  <p-select [(ngModel)]="kind" [options]="options" optionLabel="name" optionValue="value" placeholder="Tipo"
    appendTo="body" class="w-full" />
</div>

<form [formGroup]="form" (ngSubmit)="onSave()" novalidate class="space-y-4">

  <!-- Title block -->
  <div class="flex flex-col sm:flex-row sm:gap-4 gap-2">

    <!-- Supertitle -->
    <div formGroupName="title" class="flex-1">
      <p-floatlabel variant="in">
        <input pInputText formControlName="supertitle" [invalid]="isFieldInvalid('supertitle')" maxlength="100" id="supertitleInput"
          class="w-full" />
        <label for="supertitleInput">Supertítulo</label>
      </p-floatlabel>

      <div class="mt-1">
        @for (failure of failures().getFailures('title.supertitle'); track failure) {
          <p-message severity="error" size="small" variant="simple">{{ failure.message }}</p-message>
        }
      </div>
    </div>

    <!-- Title -->
    <div formGroupName="title" class="flex-1">
      <p-floatlabel variant="in">
        <input pInputText formControlName="title" [invalid]="isFieldInvalid('title')" maxlength="100" id="titleInput" class="w-full" />
        <label for="titleInput">Título</label>
      </p-floatlabel>

      <div class="mt-1">
        @for (failure of failures().getFailures('title.title'); track failure) {
          <p-message severity="error" size="small" variant="simple">{{ failure.message }}</p-message>
        }
      </div>
    </div>

    <!-- Subtitle -->
    <div formGroupName="title" class="flex-1">
      <p-floatlabel variant="in">
        <input pInputText formControlName="subtitle" [invalid]="isFieldInvalid('subtitle')" maxlength="100" id="subtitleInput"
          class="w-full" />
        <label for="subtitleInput">Subtítulo</label>
      </p-floatlabel>

      <div class="mt-1">
        @for (failure of failures().getFailures('title.subtitle'); track failure) {
          <p-message severity="error" size="small" variant="simple">{{ failure.message }}</p-message>
        }
      </div>
    </div>

  </div>

  <!-- ISBN -->
  <div>
    <p-floatlabel variant="in">
      <input pInputText formControlName="isbn" [invalid]="isFieldInvalid('isbn')" maxlength="17" id="isbnInput" class="w-full" />
      <label for="isbnInput">ISBN</label>
      </p-floatlabel>

    <div class="mt-1">
      @for (failure of failures().getFailures('isbn'); track failure) {
        <p-message severity="error" size="small" variant="simple">{{ failure.message }}</p-message>
      }
    </div>
  </div>

  <!-- Language -->
  <div>
    <p-select [options]="languages" formControlName="language" optionLabel="name" optionValue="code" placeholder="Idioma"
      appendTo="body" class="w-full" [invalid]="isFieldInvalid('language')" />

    <div class="mt-1">
      @for (failure of failures().getFailures('language'); track failure) {
        <p-message severity="error" size="small" variant="simple">{{ failure.message }}</p-message>
      }
    </div>
  </div>

  <!-- Save button -->
  <p-button type="submit" name="Guardar" [loading]="loading()" [disabled]="!formStatus.saveEnabled"
    [attr.aria-disabled]="!formStatus.saveEnabled">
    Guardar
  </p-button>

</form>