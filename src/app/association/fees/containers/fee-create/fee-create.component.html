<layout-article title="Create fee">
  <div *ngIf="selectingMember; then member_selection else fee_form"></div>

  <!-- Fee form -->
  <ng-template #fee_form>
    <div class="row mb-2">
      <!-- Select member button -->
      <div class="col-sm-1">
        <button type="button" class="btn" aria-label="Search" [disabled]="saving" (click)="onRequestMember()">
          <icon-search></icon-search>
        </button>
      </div>
      <!-- Selected member -->
      <div class="col-sm-1">
        <label for="memberInput" id="memberLabel" class="col-sm-2 col-form-label">Member</label>
      </div>
      <div class="col-sm-10">
        <input type="text" id="memberInput" [value]="memberName" readonly class="form-control"
          [ngClass]="{ 'is-invalid': isMissingMember() }" aria-describedby="memberLabel">
      </div>
    </div>
    <!-- Form -->
    <assoc-fee-form [saving]="saving" [failures]="failures" (save)="onSave($event)">
    </assoc-fee-form>
  </ng-template>
  <!-- Member selection -->
  <ng-template #member_selection>
    <layout-waiting-wrapper [waiting]="readingMembers">
      <assoc-member-selection [members]="members" (selectMember)="onSelectMember($event)" [current]="membersPage"
        [pages]="membersTotalPages" (goToPage)="onGoToMembersPage($event)">
      </assoc-member-selection>
      <button type="button" class="btn btn-primary" (click)="onCancelSelectMember()" aria-label="Cancel">Cancel</button>
    </layout-waiting-wrapper>
  </ng-template>
</layout-article>