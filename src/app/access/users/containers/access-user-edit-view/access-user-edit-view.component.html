<layout-article title="Edit user">
    <div *ngIf="selectingRole; then role_selection else user_edition"></div>
    <ng-template #user_edition>
        <layout-form-frame [saving]="waiting" [formValid]="formValid" (save)="onSave()">
            <access-user-form [user]="user" (save)="onSave()" (valueChange)="onFormChange($event)"
                (validChange)="onFormValidChange($event)"></access-user-form>
            <pagination-navigation [current]="rolesPageInfo.page" [pages]="rolesPageInfo.totalPages"
                (goTo)="onGoToRolePage($event)">
            </pagination-navigation>
            <access-user-role-form (addRole)="onShowAddRole()" (removeRole)="onRemoveRole($event)" [roles]="roles">
            </access-user-role-form>
        </layout-form-frame>
    </ng-template>
    <ng-template #role_selection>
        <access-user-role-selection (selectRole)="onAddRole($event)" [pageInfo]="rolesPageInfo"
            (goToPage)="onGoToRoleSelectionPage($event)" [roles]="roleSelection">
        </access-user-role-selection>
    </ng-template>
</layout-article>