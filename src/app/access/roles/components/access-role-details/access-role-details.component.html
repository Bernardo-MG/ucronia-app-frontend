<layout-article title="Edit role">
  <!-- Role form -->
  <!-- Role -->
  <div class="mb-1">
    <layout-waiting-wrapper [waiting]="waiting">
      <layout-edition-wrapper [editable]="editPermission" [saving]="saving" [editing]="editing"
        [deletable]="deletePermission" [readonly]="!isEditable()" (delete)="onDelete()" (edit)="onStartEditing()">
        <!-- Form -->
        <access-role-form id="edit" [data]="data" [readonly]="!isEditable()" [failures]="failures"
          (save)="onSave($event)">
        </access-role-form>
        <!-- Info -->
        <access-role-info id="info" [data]="data"></access-role-info>
      </layout-edition-wrapper>
    </layout-waiting-wrapper>
  </div>
  <!-- Permissions -->
  <div class="mb-1">
    <layout-waiting-wrapper [waiting]="waitingPermissions">
      <div class="card">
        <div class="card-body">
          <!-- Permissions list -->
          <access-role-permissions (removePermission)="onRemovePermission($event)" [permissions]="permissions">
          </access-role-permissions>
          <!-- Permissions navigation -->
          <pagination-navigation [current]="permissionsPageInfo.page" [pages]="permissionsPageInfo.totalPages"
            (goTo)="onGoToPermissionPage($event)">
          </pagination-navigation>
        </div>
      </div>
    </layout-waiting-wrapper>
  </div>
  <!-- Edit privileges -->
  <layout-waiting-wrapper [waiting]="waitingActionsSelection || waitingResourcesSelection">
    <div class="card">
      <div class="card-body">
        <access-role-add-permission [actions]="actionSelection" [totalActionPages]="totalActionPages"
          [resources]="resourceSelection" [totalResourcePages]="totalResourcePages"
          (addPermission)="onAddPermission($event)" (goToActionPage)="onGoToActionSelectionPage($event)"
          (goToResourcePage)="onGoToResourceSelectionPage($event)"></access-role-add-permission>
      </div>
    </div>
  </layout-waiting-wrapper>
</layout-article>